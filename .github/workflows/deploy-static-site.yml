name: Deploy Static Site
on:
  workflow_call:
    inputs:
      region:
        required: true
        type: string
      env:
        required: true
        type: string
    secrets:
      aws-ci-role-arn:
        required: true

jobs:
  Create-Deployment-Role:
    uses: jfdi-dev/pipelines/.github/workflows/create-deployment-role.yml@main
    with:
      region: ${{ inputs.region }}
      env: ${{ inputs.env }}
      # account: ${{ inputs.account }}
      # project: ${{ inputs.project }}
      # artifact: ${{ inputs.artifact }}
    secrets:
      # tooling-account: ${{ secrets.tooling-account }}
      aws-ci-role-arn: ${{ secrets.aws-ci-role-arn }}
  Deploy-Infrastructure:
    needs: Create-Deployment-Role
    runs-on: ubuntu-latest
    steps:
      - name: Show-ARN
        run: |
          echo "${{ needs.Create-Deployment-Role.outputs.deployment-role-arn }}"
        shell: bash
  # Deploy-Infrastructure:
  #   needs: Create-Deployment-Role
  #   uses: jfdi-dev/pipelines/.github/workflows/deploy-infrastructure.yml@main
  #   with:
  #     region: ${{ inputs.region }}
  #     account: ${{ inputs.account }}
  #     project: ${{ inputs.project }}
  #     artifact: ${{ inputs.artifact }}
  #   secrets:
  #     tooling-account: ${{ secrets.tooling-account }}
  #     ci-role-arn: ${{ secrets.aws-ci-role-arn }}
  # Sync-Files:
  #   needs: Deploy-Infrastructure
  #   uses: jfdi-dev/pipelines/.github/workflows/sync-files.yml@main
  #   with:
  #     region: ${{ inputs.region }}
  #     project: ${{ inputs.project }}
  #     artifact: ${{ inputs.artifact }}
  #     dir: ${{ inputs.files-directory }}
  #   secrets:
  #     tooling-account: ${{ secrets.tooling-account }}
  #     ci-role-arn: ${{ secrets.aws-ci-role-arn }}
